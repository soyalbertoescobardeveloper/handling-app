<ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button [text]="getBackButtonText()" defaultHref="/"></ion-back-button>
      </ion-buttons>
      <ion-avatar slot="start" style="vertical-align: middle;">
        <img [src]="appUrl + chat?.contactImage || 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGVyc29ufGVufDB8fDB8fHww'">
      </ion-avatar>
      <ion-title class="title-left">
        {{ chat?.contactName }}
      </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list *ngIf="chat">
    <ion-item *ngFor="let message of chat.messages" [class]="message.sentByMe ? 'received' : 'sent'">
      <div class="message-content">
        {{ message.content }}
      </div>
      <div class="message-time">
        {{ message.timestamp | date: 'shortTime' }}
      </div>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-input [(ngModel)]="newMessage" placeholder="{{translationService.getTranslation('type')}}" (keyup.enter)="sendMessage()"></ion-input>
    <ion-buttons slot="end">
      <ion-button (click)="sendMessage()"><ion-icon slot="icon-only" name="send-outline"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
