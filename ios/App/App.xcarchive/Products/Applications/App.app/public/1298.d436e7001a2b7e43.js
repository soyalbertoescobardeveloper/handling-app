"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1298],{1298:(z,T,p)=>{p.r(T),p.d(T,{DetailPaxModule:()=>B});var h=p(6814),o=p(3582),f=p(95),c=p(3044),M=p(5861),n=p(6689),Z=p(4414),U=p(553),P=p(5078),A=p(9862);function b(a,l){if(1&a&&(n.ynx(0),n.TgZ(1,"ion-thumbnail",1)(2,"a",20),n._UZ(3,"ion-img",21),n.qZA()(),n.BQk()),2&a){const t=n.oxw();n.xp6(2),n.Q6J("href",t.appUrl+(null==t.pax?null:t.pax.pax_pass_img),n.LSH),n.xp6(1),n.Q6J("src",t.appUrl+(null==t.pax?null:t.pax.pax_pass_img))}}function y(a,l){1&a&&(n.TgZ(0,"ion-thumbnail",1),n._UZ(1,"ion-img",22),n.qZA())}function k(a,l){if(1&a){const t=n.EpF();n.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-toggle",23),n.NdJ("ionChange",function(e){n.CHM(t);const s=n.oxw();return n.KtG(s.checkboxChanged(e,"pax_pass_sta"))}),n._uU(3,"Verify Passport"),n._UZ(4,"br"),n.TgZ(5,"ion-note",7),n._uU(6,"Make sure to check the document before checking in"),n.qZA()()(),n.TgZ(7,"ion-item")(8,"ion-label",24),n._uU(9,"Comments"),n.qZA(),n.TgZ(10,"ion-textarea",25),n.NdJ("ngModelChange",function(e){n.CHM(t);const s=n.oxw();return n.KtG(s.pax.passport_image_pax_comments=e)}),n.qZA()(),n.TgZ(11,"ion-row")(12,"ion-col",14)(13,"ion-item")(14,"ion-button",26),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.sendVerify("pax_pass"))}),n._uU(15,"Verify"),n.qZA()()()()()}if(2&a){const t=n.oxw();n.xp6(2),n.Q6J("checked",!0)("checked",1===(null==t.pax?null:t.pax.passport_image_pax_status)),n.xp6(8),n.Q6J("ngModel",t.pax.passport_image_pax_comments)}}function J(a,l){if(1&a&&(n.ynx(0),n.TgZ(1,"ion-thumbnail",1)(2,"a",20),n._UZ(3,"ion-img",21),n.qZA()(),n.BQk()),2&a){const t=n.oxw();n.xp6(2),n.Q6J("href",t.appUrl+(null==t.pax?null:t.pax.pax_visa_img),n.LSH),n.xp6(1),n.Q6J("src",t.appUrl+(null==t.pax?null:t.pax.pax_visa_img))}}function q(a,l){1&a&&(n.TgZ(0,"ion-thumbnail",1),n._UZ(1,"ion-img",22),n.qZA())}function w(a,l){if(1&a){const t=n.EpF();n.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-toggle",23),n.NdJ("ionChange",function(e){n.CHM(t);const s=n.oxw();return n.KtG(s.checkboxChanged(e,"pax_visa_sta"))}),n._uU(3,"Verify Visa"),n._UZ(4,"br"),n.TgZ(5,"ion-note",7),n._uU(6,"Make sure to check the document before checking in"),n.qZA()()(),n.TgZ(7,"ion-item")(8,"ion-label",24),n._uU(9,"Comments"),n.qZA(),n.TgZ(10,"ion-textarea",25),n.NdJ("ngModelChange",function(e){n.CHM(t);const s=n.oxw();return n.KtG(s.pax.visa_image_pax_comments=e)}),n.qZA()(),n.TgZ(11,"ion-row")(12,"ion-col",14)(13,"ion-item")(14,"ion-button",26),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.sendVerify("pax_visa"))}),n._uU(15,"Verify"),n.qZA()()()()()}if(2&a){const t=n.oxw();n.xp6(2),n.Q6J("checked",!0)("checked",1===(null==t.pax?null:t.pax.visa_image_pax_status)),n.xp6(8),n.Q6J("ngModel",t.pax.visa_image_pax_comments)}}const v=function(){return[0,1]},N=[{path:"",component:(()=>{var a;class l{constructor(i,e,s,x,g){this.route=i,this.sharedDataService=e,this.modalController=s,this.loadingController=x,this.http=g,this.appUrl=U.N.apiUrl,this.activatedRoute=(0,n.f3M)(c.gz),this.platform=(0,n.f3M)(Z.t4),this.message={passengers:[{passport_image_pax_comments:"",pax_id:0,pax_name:"",pax_parental:"",pax_maternal:""}]}}ngOnInit(){const i=this.activatedRoute.snapshot.paramMap.get("id");this.message=this.sharedDataService.getMessage();const e=i?parseInt(i,10):null;this.message&&this.message.passengers&&(this.pax=this.message.passengers.find(s=>s.pax_id===e),console.info("tag",this.pax))}getBackButtonText(){return this.platform.is("ios")?"Detail Operation":""}checkboxChanged(i,e){this.pax&&("pax_pass_sta"===e&&(this.pax.passport_image_pax_status=i.detail.checked?1:2),"pax_visa_sta"===e&&(this.pax.visa_image_pax_status=i.detail.checked?1:2))}sendVerify(i){var e=this;return(0,M.Z)(function*(){e.loading=yield e.loadingController.create({cssClass:"custom-spinner",spinner:null,translucent:!0,backdropDismiss:!1}),yield e.loading.present();let x,g,s=new FormData;const u={pax_pass:{id:"pax_id",statusKey:"passport_image_pax_status",commentsKey:"passport_image_pax_comments",model:"pax",path:""},pax_visa:{id:"pax_id",statusKey:"visa_image_pax_status",commentsKey:"visa_image_pax_comments",model:"pax",path:""}}[i],C=(r,m,d)=>{let _=d.path?D(e.pax,d.path):e.pax,I=(null==_?void 0:_[m])||(m.includes("status")?0:"");r.append(m,I.toString())};if(u){const r=D(e.pax,u.id);g=null!=r?r:u.id,x=u.model||"ope",C(s,u.statusKey,u),C(s,u.commentsKey,u),s.append("_method","PUT")}function D(r,m){return m.split(".").reduce((d,_)=>(d||{})[_],r)}e.http.post(e.appUrl+"api/update-document/"+x+"/"+g,s).subscribe(r=>{e.modalController.dismiss(),e.loading.dismiss()},r=>{console.error("Error al realizar la solicitud HTTP",r),e.loading.dismiss()})})()}getStatusLabel(i){if(!i)return"Not Verified";switch(i){case 0:return"Not verified";case 1:return"Aprobado";case 2:return"Rechazado";default:return""}}}return(a=l).\u0275fac=function(i){return new(i||a)(n.Y36(c.gz),n.Y36(P.y),n.Y36(Z.IN),n.Y36(Z.HT),n.Y36(A.eN))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-detail-pax"]],decls:75,vars:28,consts:[[3,"translucent"],["slot","start"],["defaultHref","/",3,"text"],[3,"fullscreen"],[4,"ngIf","ngIfElse"],["noImage",""],["size","9"],[1,"ion-text-wrap"],[1,"title-pax"],["size","2"],["id","open-passport",1,"custom-button"],["name","list-circle-outline"],[1,"ion-padding"],["trigger","open-passport",3,"initialBreakpoint","breakpoints"],["size","12"],["value","first","size","large"],["slot","header","color","light","size","large"],["slot","content",1,"ion-padding"],["id","open-visa",1,"custom-button"],["trigger","open-visa",3,"initialBreakpoint","breakpoints"],["download","",3,"href"],["alt","SAE",3,"src"],["src","https://www.apricotmaps.com/resources/Pictures/docs/no-image.png","alt","Imagen predeterminada"],["aria-label","Success toggle","color","success",3,"checked","ionChange"],["position","floating"],[3,"ngModel","ngModelChange"],["expand","full",1,"large-btn",3,"click"]],template:function(i,e){if(1&i&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA()()(),n.TgZ(4,"ion-content",3)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),n._uU(8),n.qZA(),n.TgZ(9,"ion-card-subtitle"),n._uU(10,"Documents"),n.qZA()(),n.TgZ(11,"ion-card-content")(12,"ion-list")(13,"ion-item"),n.YNc(14,b,4,2,"ng-container",4),n.YNc(15,y,2,0,"ng-template",null,5,n.W1O),n.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",6)(20,"div",7)(21,"p",8),n._uU(22,"Passport"),n.qZA(),n.TgZ(23,"h4"),n._uU(24," Date Exp: "),n.TgZ(25,"ion-note"),n._uU(26),n.ALo(27,"date"),n.qZA()()()(),n.TgZ(28,"ion-col",9)(29,"ion-button",10),n._UZ(30,"ion-icon",11),n.qZA()(),n.TgZ(31,"ion-content",12)(32,"ion-modal",13),n.YNc(33,k,16,3,"ng-template"),n.qZA()()(),n.TgZ(34,"ion-grid")(35,"ion-row")(36,"ion-col",14)(37,"ion-accordion-group")(38,"ion-accordion",15)(39,"ion-item",16)(40,"ion-label"),n._uU(41),n.qZA()(),n.TgZ(42,"div",17),n._uU(43),n.qZA()()()()()()()(),n.TgZ(44,"ion-item"),n.YNc(45,J,4,2,"ng-container",4),n.YNc(46,q,2,0,"ng-template",null,5,n.W1O),n.TgZ(48,"ion-grid")(49,"ion-row")(50,"ion-col",6)(51,"div",7)(52,"p",8),n._uU(53,"Visa"),n.qZA(),n.TgZ(54,"h4"),n._uU(55," Date Expiration: "),n.TgZ(56,"ion-note"),n._uU(57),n.ALo(58,"date"),n.qZA()()()(),n.TgZ(59,"ion-col",9)(60,"ion-button",18),n._UZ(61,"ion-icon",11),n.qZA()(),n.TgZ(62,"ion-content",12)(63,"ion-modal",19),n.YNc(64,w,16,3,"ng-template"),n.qZA()()(),n.TgZ(65,"ion-grid")(66,"ion-row")(67,"ion-col",14)(68,"ion-accordion-group")(69,"ion-accordion",15)(70,"ion-item",16)(71,"ion-label"),n._uU(72),n.qZA()(),n.TgZ(73,"div",17),n._uU(74),n.qZA()()()()()()()()()()()()),2&i){const s=n.MAs(16);n.Q6J("translucent",!0),n.xp6(3),n.Q6J("text",e.getBackButtonText()),n.xp6(1),n.Q6J("fullscreen",!0),n.xp6(4),n.lnq("Pax: ",null==e.pax?null:e.pax.pax_parental," ",null!=e.pax&&e.pax.pax_maternal?null==e.pax?null:e.pax.pax_maternal:""," ",null==e.pax?null:e.pax.pax_name," "),n.xp6(6),n.Q6J("ngIf",null==e.pax?null:e.pax.pax_pass_img)("ngIfElse",s),n.xp6(12),n.hij(" ",null!=e.pax&&e.pax.pax_pass_exp?n.xi3(27,20,null==e.pax?null:e.pax.pax_pass_exp,"dd/MM/yyyy, HH:mm"):"Date undefined"," "),n.xp6(6),n.Q6J("initialBreakpoint",1)("breakpoints",n.DdM(26,v)),n.xp6(9),n.Oqu(e.getStatusLabel(null==e.pax?null:e.pax.passport_image_pax_status)),n.xp6(2),n.hij(" ",null==e.pax?null:e.pax.passport_image_pax_comments," "),n.xp6(2),n.Q6J("ngIf",null==e.pax?null:e.pax.pax_visa_img)("ngIfElse",s),n.xp6(12),n.hij(" ",null!=e.pax&&e.pax.pax_visa_exp?n.xi3(58,23,null==e.pax?null:e.pax.pax_visa_exp,"dd/MM/yyyy, HH:mm"):"Date undefined"," "),n.xp6(6),n.Q6J("initialBreakpoint",1)("breakpoints",n.DdM(27,v)),n.xp6(9),n.Oqu(e.getStatusLabel(null==e.pax?null:e.pax.visa_image_pax_status)),n.xp6(2),n.hij(" ",null==e.pax?null:e.pax.visa_image_pax_comments," ")}},dependencies:[h.O5,f.JJ,f.On,o.We,o.eh,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.wI,o.W2,o.jY,o.Gu,o.gu,o.Xz,o.Ie,o.Q$,o.q_,o.uN,o.Nd,o.g2,o.Bs,o.ho,o.sr,o.ki,o.w,o.j9,o.oU,h.uU],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0}.title-pax[_ngcontent-%COMP%]{font-size:17px;font-weight:700}ion-modal[_ngcontent-%COMP%]{--height: auto}"],changeDetection:0}),l})()}];let Q=(()=>{var a;class l{}return(a=l).\u0275fac=function(i){return new(i||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[c.Bz.forChild(N),c.Bz]}),l})(),B=(()=>{var a;class l{}return(a=l).\u0275fac=function(i){return new(i||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[h.ez,f.u5,o.Pc,c.Bz,Q]}),l})()}}]);